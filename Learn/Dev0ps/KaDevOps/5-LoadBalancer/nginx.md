# Что такое балансировка нагрузки Nginx?

## Источник https://habr.com/ru/companies/first/articles/683870/

<!-- Nginx — это высокопроизводительный веб-сервер, который также может использоваться в качестве регулятора нагрузки — это процесс распределения веб-трафика между несколькими серверами с помощью Nginx. -->

<!-- Создадим новый файл конфигурации для балансировщика нагрузки: -->

cd /etc/nginx/sites-available/
sudo nano default

http {
upstream app{
server 10.2.0.100;
server 10.2.0.101;
server 10.2.0.102;
}

# Этот сервер принимает весь трафик на порт 80 и передает его вышестоящему потоку.

# Обратите внимание, что имя вышестоящего потока и proxy_pass должны совпадать.

server {
listen 80;

      server_name mydomain.com;

      location / {
          include proxy_params;

          proxy_pass http://app;


          proxy_redirect off;
          proxy_http_version 1.1;
          proxy_set_header Upgrade $http_upgrade;
          proxy_set_header Connection "upgrade";
      }

}
}

<!-- В файле необходимо определить директиву upstream и server. Upstream определяет, куда Nginx будет передавать запросы после их получения. Она содержит IP-адреса группы серверов (бэкенда), на которые могут быть отправлены запросы в зависимости от выбранного метода регулирования нагрузки. По умолчанию Nginx использует метод балансировки round-robin для распределения мощности между серверами.

Сегмент server определяет порт 80, через который Nginx будет получать запросы. Он также содержит переменную proxy_pass.

Переменная proxy_pass используется для указания NGINX, куда отправлять получаемый трафик. В данном случае переменная proxy_pass указывает на 3 сервера. Это позволяет NGINX направлять получаемый трафик на любой из IP-адресов вышестоящих серверов. Nginx одновременно выступает в роли обратного прокси и балансировщика нагрузки.

Обратный прокси — это сервер, который находится между бэкенд-серверами и перехватывает запросы от клиентов. -->

<!-- Round Robin — это метод балансировки нагрузки, при котором каждому серверу в кластере предоставляется равная возможность обрабатывать запросы. Этот метод часто используется в веб-серверах, где каждый запрос сервера равномерно распределяется между серверами. -->
