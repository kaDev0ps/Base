# Отправляем сообщение на почту после выполнения скриптов

    ## Обновляем список пакетов и устанавливаем
    sudo apt-get update && sudo apt-get install sendemail

    ## Устанавливаем библиотеки
    pt-get install libio-socket-ssl-perl libnet-ssleay-perl

# Допустим, у нас есть некий скрипт backup.sh

    #!/bin/bash
    ## Создаем переменную с датой
    DATE=`date +%d%m%y`

    ## Создаем папку с датой
    mkdir /backup/$DATE

    ## Делаем бэкап папки /etc
    7za a /backup/$DATE/backup.7z /etc/\*

# Создаем в той же папке скрипт sendemail.sh

    #!/bin/bash
    ## Будет отображаться "От кого"
    FROM=my@server.ru

    ## Кому
    MAILTO=email@yandex.ru

# Тема письма

    NAME=$1

# Тело письма

    BODY=$2

    ## В моем примере я отправляю письма через существующий почтовый ящик на gmail.com
    ## Скрипт легко адаптируется для любых почтовых серверов
    SMTPSERVER=smtp.gmail.com

# Логин и пароль от учетной записи gmail.com

    SMTPLOGIN=name@gmail.com
    SMTPPASS=superpassword

# Отправляем письмо

    /usr/bin/sendEmail -f $FROM -t $MAILTO -o message-charset=utf-8 -u $NAME -m $BODY -s $SMTPSERVER -o tls=yes -xu $SMTPLOGIN -xp $SMTPPASS

# Сохраняем, делаем скрипт исполняемым

chmod +x sendemail.sh

    ## Созданный скрипт принимает 2 параметра: заголовок и тема. Это удобно, потому что можно использовать один скрипт для рассылки писем с разных программ.
    ## Пробуем отправить письмо. Передаем скрипту параметры, первым будет тема, вторым тело письма.
    /home/ka/sendemail.sh Тест Проверка!

    ## Проверяем почту. На нее должно придти тестовое письмо.

# Усовершенствуем скрипт бэкапа

    Например, я хочу узнать размер созданного бэкапа и свободное место на томе.

    #!/bin/bash
    # Создаем переменную с датой
    DATE=`date +%d%m%y`

    # Создаем папку с датой
    mkdir /backup/$DATE

    # Делаем бэкап папки /etc
    7za a /backup/$DATE/backup.7z /etc/*

    # Создадим переменные с необходимой информацией.
    # Допустим конечная папка примонтирована к отдельному диску
    # Узнаем размер занимаемого места созданным бэкапом
    DU=`du -sh /backup/$DATE`

    # И информацию о размере диска
    DF=`df -hT /backup`

    # Отправляем письмо с информацией
    bash /home/ka/sendemail.sh "Бэкап выполнен!" "В кавычках считается одним аргументом $DF $DU"

# Конечно письмо будет несколько некрасивым, слишком много лишнего. Но смысл главное ясен.
